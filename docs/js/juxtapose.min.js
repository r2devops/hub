/* juxtapose - v1.1.6 - 2015-09-09
 * Copyright (c) 2015 Alex Duner and Northwestern University Knight Lab 
 * Source project on Github: https://github.com/NUKnightLab/juxtapose
 * Official Webiste: https://juxtapose.knightlab.com/
 * 
 * Edited by Go2Scale
 */
!function(t,e){var i={sliders:[],OPTIMIZATION_ACCEPTED:1,OPTIMIZATION_WAS_CONSTRAINED:2},r=["Large","Medium"];function s(t,e){var i=this;this.image=new Image,this.loaded=!1,this.image.onload=function(){i.loaded=!0,e._onLoaded()},this.image.src=t.src,this.image.alt=t.alt||"",this.label=t.label||!1,this.credit=t.credit||!1}function a(t,e){var i=this;this.image=new Image,this.loaded=!1,this.image.onload=function(){i.loaded=!0,e._onLoaded()},this.flickrID=this.getFlickrID(t.src),this.callFlickrAPI(this.flickrID,i),this.label=t.label||!1,this.credit=t.credit||!1}function n(t){if(t.naturalWidth&&t.naturalHeight)return{width:t.naturalWidth,height:t.naturalHeight};var e=new Image;return e.src=t.src,{width:e.width,height:e.height}}function o(t){return{width:n(t).width,height:n(t).height,aspect:function(){return this.width/this.height}}}function l(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function d(t,e){t.className=t.className.replace(/(\S+)\s*/g,function(t,i){return i===e?"":t}).replace(/^\s+/,"")}function c(e,i){t.body.textContent?e.textContent=i:e.innerText=i}function p(t){return e.getComputedStyle?{width:parseInt(getComputedStyle(t).width,10),height:parseInt(getComputedStyle(t).height,10)}:(w=t.getBoundingClientRect().right-t.getBoundingClientRect().left,h=t.getBoundingClientRect().bottom-t.getBoundingClientRect().top,{width:parseInt(w,10)||0,height:parseInt(h,10)||0})}function g(t){return!!t.match(/flic.kr\/.+/i)||-1!=t.indexOf("flickr.com/photos/")}function m(e,i){if("string"==typeof i||"number"==typeof i)leftPercent=parseInt(i,10);else{var r=e.getBoundingClientRect(),s={top:r.top+t.body.scrollTop+t.documentElement.scrollTop,left:r.left+t.body.scrollLeft+t.documentElement.scrollLeft},a=e.offsetWidth,n=(o=i).pageX?o.pageX:o.touches?o.touches[0].pageX:o.clientX+t.body.scrollLeft+t.documentElement.scrollLeft;leftPercent=(n-s.left)/a*100}var o;return leftPercent}function u(e,i){if("string"==typeof i||"number"==typeof i)topPercent=parseInt(i,10);else{var r=e.getBoundingClientRect(),s={top:r.top+t.body.scrollTop+t.documentElement.scrollTop,left:r.left+t.body.scrollLeft+t.documentElement.scrollLeft},a=e.offsetHeight,n=(o=i).pageY?o.pageY:o.touches?o.touches[0].pageY:o.clientY+t.body.scrollTop+t.documentElement.scrollTop;topPercent=(n-s.top)/a*100}var o;return topPercent}a.prototype={getFlickrID:function(t){if(t.match(/flic.kr\/.+/i))return function(t){var e="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",i=e.length;if("string"!=typeof t)throw'"base58Decode" only accepts strings.';var r=0;for(;t;){var s=e.indexOf(t[0]);if(s<0)throw'"base58Decode" can\'t find "'+t[0]+'" in the alphabet: "'+e+'"';var a=t.length-1;r+=s*Math.pow(i,a),t=t.substring(1)}return r.toString()}(t.split("/").slice(-1)[0]);var e=t.indexOf("flickr.com/photos/")+"flickr.com/photos/".length,i=t.substr(e);return-1==i.indexOf("/")?null:(0===i.indexOf("/")&&(i=i.substr(1)),id=i.split("/")[1],id)},callFlickrAPI:function(t,e){var i="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key=d90fc2d1f4acc584e08b8eaea5bf4d6c&photo_id="+t+"&format=json&nojsoncallback=1",r=new XMLHttpRequest;r.open("GET",i,!0),r.onload=function(){if(r.status>=200&&r.status<400){data=JSON.parse(r.responseText);var t=e.bestFlickrUrl(data.sizes.size);e.setFlickrImage(t)}else console.error("There was an error getting the picture from Flickr")},r.onerror=function(){console.error("There was an error getting the picture from Flickr")},r.send()},setFlickrImage:function(t){this.image.src=t},bestFlickrUrl:function(t){for(var e={},i=0;i<t.length;i++)e[t[i].label]=t[i].source;for(var s=0;s<r.length;s++)if(r[s]in e)return e[r[s]];return t[0].source}};var f={animate:!0,showLabels:!0,showCredits:!0,makeResponsive:!0};function v(t,e,i){var r,n;for(r in this.selector=t,this.options={animate:!0,showLabels:!0,showCredits:!0,makeResponsive:!0,startingPosition:"50%",mode:"horizontal",callback:null},this.options)r in i&&(this.options[r]=r in f?"string"!=typeof(n=i[r])?Boolean(n):!("false"===n||""===n):i[r]);2==e.length?(g(e[0].src)?this.imgBefore=new a(e[0],this):this.imgBefore=new s(e[0],this),g(e[1].src)?this.imgAfter=new a(e[1],this):this.imgAfter=new s(e[1],this)):console.warn("The images parameter takes two Image objects."),this.imgBefore.credit||this.imgAfter.credit?this.options.showCredits=!0:this.options.showCredits=!1}v.prototype={updateSlider:function(t,e){var i,r;i=(i="vertical"===this.options.mode?u(this.slider,t):m(this.slider,t)).toFixed(2)+"%",leftPercentNum=parseFloat(i),r=100-leftPercentNum+"%",leftPercentNum>=0&&leftPercentNum<=100&&(d(this.handle,"transition"),d(this.rightImage,"transition"),d(this.leftImage,"transition"),this.options.animate&&e&&(l(this.handle,"transition"),l(this.leftImage,"transition"),l(this.rightImage,"transition")),"vertical"===this.options.mode?(this.handle.style.top=i,this.leftImage.style.height=i,this.rightImage.style.height=r):(this.handle.style.left=i,this.leftImage.style.width=i,this.rightImage.style.width=r),this.sliderPosition=i)},getPosition:function(){return this.sliderPosition},displayLabel:function(e,i){label=t.createElement("div"),label.className="jx-label",label.setAttribute("tabindex",0),c(label,i),e.appendChild(label)},displayCredits:function(){credit=t.createElement("div"),credit.className="jx-credit",text="<em>Photo Credits:</em>",this.imgBefore.credit&&(text+=" <em>Before</em> "+this.imgBefore.credit),this.imgAfter.credit&&(text+=" <em>After</em> "+this.imgAfter.credit),credit.innerHTML=text,this.wrapper.appendChild(credit)},setStartingPosition:function(t){this.options.startingPosition=t},checkImages:function(){return o(this.imgBefore.image).aspect()==o(this.imgAfter.image).aspect()},calculateDims:function(t,e){var i=o(this.imgBefore.image).aspect();return t?e=t/i:e&&(t=e*i),{width:t,height:e,ratio:i}},responsivizeIframe:function(t){return t.height<e.innerHeight?t.ratio>=1&&(this.wrapper.style.paddingTop=parseInt((e.innerHeight-t.height)/2)+"px"):t.height>e.innerHeight&&(t=this.calculateDims(0,e.innerHeight),this.wrapper.style.paddingLeft=parseInt((e.innerWidth-t.width)/2)+"px"),this.options.showCredits&&(t.height-=13),t},setWrapperDimensions:function(){var t=p(this.wrapper).width,i=p(this.wrapper).height,r=this.calculateDims(t,i);e.location===e.parent.location||this.options.makeResponsive||(r=this.responsivizeIframe(r)),this.wrapper.style.height=parseInt(r.height)+"px",this.wrapper.style.width=parseInt(r.width)+"px"},optimizeWrapper:function(t){var e=i.OPTIMIZATION_ACCEPTED;return this.imgBefore.image.naturalWidth>=t&&this.imgAfter.image.naturalWidth>=t?(this.wrapper.style.width=t+"px",e=i.OPTIMIZATION_WAS_CONSTRAINED):this.imgAfter.image.naturalWidth<t?this.wrapper.style.width=this.imgAfter.image.naturalWidth+"px":this.wrapper.style.width=this.imgBefore.image.naturalWidth+"px",this.setWrapperDimensions(),e},_onLoaded:function(){this.imgBefore&&!0===this.imgBefore.loaded&&this.imgAfter&&!0===this.imgAfter.loaded&&(this.wrapper=t.querySelector(this.selector),l(this.wrapper,"juxtapose"),this.wrapper.style.width=n(this.imgBefore.image).width,this.setWrapperDimensions(),this.slider=t.createElement("div"),this.slider.className="jx-slider",this.wrapper.appendChild(this.slider),"horizontal"!=this.options.mode&&l(this.slider,this.options.mode),this.handle=t.createElement("div"),this.handle.className="jx-handle",this.rightImage=t.createElement("div"),this.rightImage.className="jx-image jx-right",this.rightImage.appendChild(this.imgAfter.image),this.leftImage=t.createElement("div"),this.leftImage.className="jx-image jx-left",this.leftImage.appendChild(this.imgBefore.image),this.labCredit=t.createElement("a"),this.labCredit.setAttribute("href","https://juxtapose.knightlab.com"),this.labCredit.setAttribute("target","_blank"),this.labCredit.setAttribute("rel","noopener"),this.labCredit.className="jx-knightlab",this.labLogo=t.createElement("div"),this.labLogo.className="knightlab-logo",this.labCredit.appendChild(this.labLogo),this.projectName=t.createElement("span"),this.projectName.className="juxtapose-name",c(this.projectName,"JuxtaposeJS"),this.labCredit.appendChild(this.projectName),this.slider.appendChild(this.handle),this.slider.appendChild(this.leftImage),this.slider.appendChild(this.rightImage),this.leftArrow=t.createElement("div"),this.rightArrow=t.createElement("div"),this.control=t.createElement("div"),this.controller=t.createElement("div"),this.leftArrow.className="jx-arrow jx-left",this.rightArrow.className="jx-arrow jx-right",this.control.className="jx-control",this.controller.className="jx-controller",this.controller.setAttribute("tabindex",0),this.controller.setAttribute("role","slider"),this.controller.setAttribute("aria-valuenow",50),this.controller.setAttribute("aria-valuemin",0),this.controller.setAttribute("aria-valuemax",100),this.handle.appendChild(this.leftArrow),this.handle.appendChild(this.control),this.handle.appendChild(this.rightArrow),this.control.appendChild(this.controller),this._init())},_init:function(){!1===this.checkImages()&&console.warn(this,"Check that the two images have the same aspect ratio for the slider to work correctly."),this.updateSlider(this.options.startingPosition,!1),!0===this.options.showLabels&&(this.imgBefore.label&&this.displayLabel(this.leftImage,this.imgBefore.label),this.imgAfter.label&&this.displayLabel(this.rightImage,this.imgAfter.label)),!0===this.options.showCredits&&this.displayCredits();var r=this;e.addEventListener("resize",function(){let e=t.getElementsByClassName("juxtapose-container")[0],i=r.wrapper.getBoundingClientRect(),s=e.getBoundingClientRect();r.wrapper.style.width=s.width+"px",r.wrapper.style.height=s.width*(i.height/i.width)+"px"}),this.slider.addEventListener("mousedown",function(t){(t=t||e.event).preventDefault(),r.updateSlider(t,!0),animate=!0,boudingRect=this.getBoundingClientRect(),imageX=boudingRect.x,imageWidth=imageX+boudingRect.width,mouseMove=function(t){(t=t||e.event).preventDefault(),animate&&r.updateSlider(t,!1),t.clientX-imageX<=0&&t.clientX<=imageX?r.updateSlider(0,!1):t.clientX>imageWidth&&t.clientX<=e.innerWidth&&r.updateSlider(100,!1)},e.addEventListener("mousemove",mouseMove),e.addEventListener("mouseup",function(t){(t=t||e.event).preventDefault(),t.stopPropagation(),e.removeEventListener("mouseup",arguments.callee),e.removeEventListener("mousemove",mouseMove),animate=!1})}),this.slider.addEventListener("touchstart",function(t){(t=t||e.event).preventDefault(),t.stopPropagation(),r.updateSlider(t,!0),this.addEventListener("touchmove",function(t){(t=t||e.event).preventDefault(),t.stopPropagation(),r.updateSlider(event,!1)})}),this.handle.addEventListener("keydown",function(t){var i=(t=t||e.event).which||t.keyCode,s=parseFloat(this.style.left);if(37==i){s-=1;var a=parseFloat(this.style.left)-1;r.updateSlider(a,!1),r.controller.setAttribute("aria-valuenow",s)}if(39==i){s+=1;var n=parseFloat(this.style.left)+1;r.updateSlider(n,!1),r.controller.setAttribute("aria-valuenow",s)}}),this.leftImage.addEventListener("keydown",function(t){var e=t.which||t.keyCode;13!=e&&32!=e||(r.updateSlider("90%",!0),r.controller.setAttribute("aria-valuenow",90))}),this.rightImage.addEventListener("keydown",function(t){var e=t.which||t.keyCode;13!=e&&32!=e||(r.updateSlider("10%",!0),r.controller.setAttribute("aria-valuenow",10))}),i.sliders.push(this),this.options.callback&&"function"==typeof this.options.callback&&this.options.callback(this)}},i.makeSlider=function(t,e){void 0===e&&(e=i.sliders.length);var r=t,s=r.querySelectorAll("img"),a={};r.getAttribute("data-animate")&&(a.animate=r.getAttribute("data-animate")),r.getAttribute("data-showlabels")&&(a.showLabels=r.getAttribute("data-showlabels")),r.getAttribute("data-showcredits")&&(a.showCredits=r.getAttribute("data-showcredits")),r.getAttribute("data-startingposition")&&(a.startingPosition=r.getAttribute("data-startingposition")),r.getAttribute("data-mode")&&(a.mode=r.getAttribute("data-mode")),r.getAttribute("data-makeresponsive")&&(a.mode=r.getAttribute("data-makeresponsive")),specificClass="juxtapose-"+e,l(t,specificClass),selector="."+specificClass,r.innerHTML?r.innerHTML="":r.innerText="",slider=new i.JXSlider(selector,[{src:s[0].src,label:s[0].getAttribute("data-label"),credit:s[0].getAttribute("data-credit"),alt:s[0].alt},{src:s[1].src,label:s[1].getAttribute("data-label"),credit:s[1].getAttribute("data-credit"),alt:s[1].alt}],a)},i.scanPage=function(){for(var e=t.querySelectorAll(".juxtapose"),r=0;r<e.length;r++)i.makeSlider(e[r],r)},i.JXSlider=v,e.juxtapose=i,i.scanPage()}(document,window),!window.addEventListener&&function(t,e,i,r,s,a,n){t.addEventListener=e.addEventListener=i.addEventListener=function(t,e){var i=this;n.unshift([i,t,e,function(t){t.currentTarget=i,t.preventDefault=function(){t.returnValue=!1},t.stopPropagation=function(){t.cancelBubble=!0},t.target=t.srcElement||i,e.call(i,t)}]),this.attachEvent("on"+t,n[0][3])},t.removeEventListener=e.removeEventListener=i.removeEventListener=function(t,e){for(var i,r=0;i=n[r];++r)if(i[0]==this&&i[1]==t&&i[2]==e)return this.detachEvent("on"+t,n.splice(r,1)[0][3])},t.dispatchEvent=e.dispatchEvent=i.dispatchEvent=function(t){return this.fireEvent("on"+t.type,t)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,0,0,0,[]);